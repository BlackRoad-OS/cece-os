#!/bin/bash
# CECE-RESUME v1.0 - AI Resume Builder
RESUME_DIR=~/cece/resumes

create() {
    NAME="$1"
    TITLE="$2"
    SKILLS="$3"
    FILE="$RESUME_DIR/${NAME// /_}_resume.html"
    
    if command -v ollama &>/dev/null; then
        SUMMARY=$(echo "Write a 2-sentence professional summary for $NAME, a $TITLE with skills in $SKILLS" | ollama run llama3.2 2>/dev/null | head -3)
    else
        SUMMARY="Experienced $TITLE with expertise in $SKILLS."
    fi
    
    echo "<!DOCTYPE html><html><head><title>$NAME - Resume</title>" > "$FILE"
    echo "<style>body{font-family:Georgia,serif;max-width:800px;margin:40px auto;padding:20px;line-height:1.6;}" >> "$FILE"
    echo "h1{color:#FF1D6C;border-bottom:2px solid #FF1D6C;padding-bottom:10px;}" >> "$FILE"
    echo "h2{color:#333;margin-top:30px;}</style></head><body>" >> "$FILE"
    echo "<h1>$NAME</h1><h3>$TITLE</h3>" >> "$FILE"
    echo "<h2>Summary</h2><p>$SUMMARY</p>" >> "$FILE"
    echo "<h2>Skills</h2><p>$SKILLS</p>" >> "$FILE"
    echo "<p><em>Generated by CECE Resume Builder</em></p></body></html>" >> "$FILE"
    echo "Resume: $FILE"
}

case "$1" in
    create) create "$2" "$3" "$4" ;;
    list) ls "$RESUME_DIR"/*.html 2>/dev/null || echo "(none)" ;;
    *) echo "CECE-RESUME: create <name> <title> <skills>" ;;
esac
