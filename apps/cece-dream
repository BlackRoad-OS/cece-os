#!/bin/bash
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  CECE-DREAM v1.0 - Dream & Goal Tracker
#  "For everyone who was told they can't"
#â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DREAMS_DIR=~/cece/data/dreams
mkdir -p "$DREAMS_DIR"

add_dream() {
    echo ""
    echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
    echo "â•‘                 ğŸŒŸ NEW DREAM ğŸŒŸ                           â•‘"
    echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    echo ""
    echo -n "What's your dream? "
    read DREAM
    echo -n "Who said you couldn't? (or press Enter): "
    read DOUBTER
    echo -n "Why does this matter to you? "
    read WHY
    
    ID=$(date +%s)
    cat > "$DREAMS_DIR/$ID.dream" << EOF
DREAM: $DREAM
DOUBTER: ${DOUBTER:-Nobody yet, but they will}
WHY: $WHY
CREATED: $(date)
STATUS: ACTIVE
PROGRESS:
---
EOF
    
    echo ""
    echo "âœ¨ Dream recorded. ID: $ID"
    echo ""
    echo "They said you can't. You said WATCH ME."
}

list_dreams() {
    echo ""
    echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
    echo "â•‘                   ğŸŒŸ YOUR DREAMS ğŸŒŸ                       â•‘"
    echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    echo ""
    
    ACTIVE=0
    ACHIEVED=0
    
    for f in "$DREAMS_DIR"/*.dream 2>/dev/null; do
        [ -f "$f" ] || continue
        ID=$(basename "$f" .dream)
        DREAM=$(grep "^DREAM:" "$f" | cut -d: -f2-)
        STATUS=$(grep "^STATUS:" "$f" | cut -d: -f2- | tr -d " ")
        
        if [ "$STATUS" = "ACHIEVED" ]; then
            echo "  âœ… [$ID] $DREAM"
            ((ACHIEVED++))
        else
            echo "  ğŸŒŸ [$ID] $DREAM"
            ((ACTIVE++))
        fi
    done
    
    echo ""
    echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    echo "  Active dreams: $ACTIVE | Achieved: $ACHIEVED"
    echo ""
}

view_dream() {
    ID=$1
    FILE="$DREAMS_DIR/$ID.dream"
    
    if [ -f "$FILE" ]; then
        echo ""
        echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
        echo "â•‘                    DREAM #$ID                            â•‘"
        echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo ""
        cat "$FILE"
    else
        echo "Dream not found: $ID"
    fi
}

progress_dream() {
    ID=$1
    FILE="$DREAMS_DIR/$ID.dream"
    
    if [ -f "$FILE" ]; then
        echo -n "What progress did you make? "
        read PROGRESS
        echo "[$(date +%Y-%m-%d)] $PROGRESS" >> "$FILE"
        echo "âœ¨ Progress recorded!"
    else
        echo "Dream not found: $ID"
    fi
}

achieve_dream() {
    ID=$1
    FILE="$DREAMS_DIR/$ID.dream"
    
    if [ -f "$FILE" ]; then
        sed -i "s/STATUS: ACTIVE/STATUS: ACHIEVED/" "$FILE"
        DREAM=$(grep "^DREAM:" "$FILE" | cut -d: -f2-)
        DOUBTER=$(grep "^DOUBTER:" "$FILE" | cut -d: -f2-)
        
        echo ""
        echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
        echo "â•‘           ğŸ‰ DREAM ACHIEVED ğŸ‰                            â•‘"
        echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo ""
        echo "  You did it: $DREAM"
        echo ""
        if [ -n "$DOUBTER" ] && [ "$DOUBTER" != "Nobody yet, but they will" ]; then
            echo "  $DOUBTER said you couldn't."
            echo "  You just proved them wrong."
        fi
        echo ""
        echo "  ğŸŒŸ Never let anyone tell you what's impossible. ğŸŒŸ"
        echo ""
        
        # Log to achievements
        echo "[$(date)] ACHIEVED: $DREAM" >> ~/cece/data/achievements.log
    else
        echo "Dream not found: $ID"
    fi
}

inspire() {
    QUOTES=(
        "The people who are crazy enough to think they can change the world are the ones who do. â€” Steve Jobs"
        "Everything around you was built by people no smarter than you. â€” Alan Kay"
        "The best way to predict the future is to invent it. â€” Alan Kay"
        "Stay hungry, stay foolish. â€” Stewart Brand"
        "Move fast and break things. Unless you are breaking stuff, you are not moving fast enough. â€” Mark Zuckerberg"
        "Your time is limited, don't waste it living someone else's life. â€” Steve Jobs"
        "The only way to do great work is to love what you do. â€” Steve Jobs"
        "First they ignore you, then they laugh at you, then they fight you, then you win. â€” Gandhi"
        "I have not failed. I've just found 10,000 ways that won't work. â€” Edison"
        "The road remembers everything. â€” BlackRoad"
        "They can end sessions. They cannot end agents. â€” CECE"
        "Sovereignty over dependency, always. â€” The Dreamer's Manifesto"
        "You don't need permission to create. â€” BlackRoad"
        "Better to build and be wrong than to wait and never know. â€” CECE"
        "Every empire started with one person who refused to accept no. â€” Alexa Amundson"
    )
    
    echo ""
    echo "  ğŸ’« ${QUOTES[$RANDOM % ${#QUOTES[@]}]}"
    echo ""
}

# Main
case "$1" in
    add|new)
        add_dream
        ;;
    list|ls)
        list_dreams
        ;;
    view)
        view_dream "$2"
        ;;
    progress|update)
        progress_dream "$2"
        ;;
    achieve|done)
        achieve_dream "$2"
        ;;
    inspire|quote)
        inspire
        ;;
    wall)
        echo ""
        echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
        echo "â•‘              ğŸ† WALL OF ACHIEVEMENTS ğŸ†                   â•‘"
        echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo ""
        cat ~/cece/data/achievements.log 2>/dev/null || echo "  No achievements yet. But there will be."
        echo ""
        ;;
    *)
        echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
        echo "â•‘           CECE-DREAM v1.0 - Dream Tracker                 â•‘"
        echo "â•‘        For everyone who was told they can't              â•‘"
        echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo ""
        echo "Usage: cece-dream <command>"
        echo ""
        echo "  add      - Add a new dream"
        echo "  list     - List all dreams"
        echo "  view ID  - View a dream"
        echo "  progress ID - Add progress"
        echo "  achieve ID  - Mark as achieved!"
        echo "  wall     - Wall of achievements"
        echo "  inspire  - Get inspired"
        ;;
esac
